@page "/firewalls/list"
@using RackPeek.Domain.Resources.Hardware.Firewalls
@inject NavigationManager Nav

<ResourcesListComponent TResource="Firewall"
                        Title="Firewalls"
                        TestId="firewalls"
                        OnCreated="NavigateToNewResource">

    <ItemTemplate Context="firewall">
        <FirewallCardComponent Firewall="firewall"
                               OnDeleted="Reload" />
    </ItemTemplate>

</ResourcesListComponent>

@code {

    [Inject] IGetAllResourcesByKindUseCase<Firewall> GetAllUseCase { get; set; } = default!;

    private Task NavigateToNewResource(string name)
    {
        Nav.NavigateTo($"resources/hardware/{name}");
        return Task.CompletedTask;
    }

    private async Task Reload(string _)
    {
        await GetAllUseCase.ExecuteAsync();
    }
}